#[ $Id$ ]#


#[ was: ui/viewlets/templates/workspace_item_viewlet.pt ]#
$begin{items}
<dt class="portletHeader" id="fieldsetlegend-${view.list_id}">
    <span>${i18n(view.name)}</span>
</dt>
<dd id="fieldset-${view.list_id}" class="portletItem">
    $if{view.getData()}
    <table id="workspace-table-${view.list_id}" class="listing grid">
        <thead>
            <tr>
                <th>${i18n("Subject")}</th>
                <th>${i18n("Type")}</th>
                <th>${i18n("Status")}</th>
                <th>${i18n("Status date")}</th>
                <th>${i18n("Owner")}</th>
                <th>${i18n("To")}</th>
            </tr>
        </thead>
        <tbody>
            $for{result in view.getData()}
            <tr $if{result.get("css_class")}class="${result['css_class']}"$fi>
                <td><a href="${result['url']}">${result["subject"]}</a></td>
                <td>${i18n(result["type"])}</td>
                <td>${i18n(result["status"])}</td>
                <td>${result["status_date"]}</td>
                <td>${result["owner"]}</td>
                <td>${result["to"]}</td>
            </tr>
            $rof
        </tbody>
    </table>
    $fi
</dd>
$end{items}


#[ was: ui/viewlets/templates/mp_item_viewlet.pt ]#
$begin{mp_items}
<dt id="fieldsetlegend-${view.view_id}">
  ${i18n(view.view_title)}
</dt>
<dd id="fieldset-${view.view_id}">
    <table class="listing">
        <thead>
            <tr>
                <th>${i18n("Type")}</th>
                <th>${i18n("Title")}</th>
                <th>${i18n("Status")}</th>
                <th>${i18n("Submission date")}</th>
            </tr>
        </thead>
        <tbody>
            $for{result in view.results()}
            <tr>
                <td>${i18n(result["type"])}</td>
                <td><a href="${result['url']}">${result["short_name"]}</a></td>
                <td>${i18n(result["status"])}</td>
                <td>${view.formatter.format(result['submission_date'])}</td>
            </tr>
            $rof
        </tbody>
  </table>
</dd>
$end{mp_items}


#[ was: ui/viewlets/templates/workspace_sitting_viewlet.pt ]#
$begin{sittings}
<dt class="portletHeader" id="fieldsetlegend-${view.list_id}">
    <span>${i18n(view.name)}</span>
</dt>
<dd id="fieldset-${view.list_id}" class="portletItem">
    $if{view.getData()}
    <table id="workspace-table-${view.list_id}" class="listing grid">
        <thead>
            <tr>
                <th>${i18n("Date")}</th>
                <th>${i18n("Venue")}</th>
                <th>${i18n("Type")}</th>
                <th>${i18n("Group")}</th>
                <th>${i18n("Status")}</th>
            </tr>
        </thead>
        <tbody>
            $for{result in view.getData()}
            <tr class="${result["css_class"]}">
                <td><a href="${result['url']}">${result["date"]},
                    ${result["time_from_to"][0]} - ${result["time_from_to"][1]}
                    </a></td>
                <td>${result["venue"]}</td>
                #[
!+SITTING_TYPE(mr, sep-2010) the following key lookup is changed to a get() 
call to glaze over the cases when a sitting.sitting_type is not set.
For more context see this email thread:
http://groups.google.com/group/bungeni-dev/browse_thread/thread/2d46b20634798b5e
                ]#
                <td>${result.get("sitting_type", "")}</td>
                <td>${result["group"]}</td>
                <td>${i18n(result["status"])}</td>
            </tr>
            $rof
        </tbody>
    </table>
    $fi
</dd>
$end{sittings}


$begin{scheduled}
<dt class="portletHeader" id="fieldsetlegend-${view.list_id}">
    <span>${i18n(view.name)}</span>
</dt>
<dd id="fieldset-${view.list_id}" class="portletItem">
    $if{view.getData()}
    <table id="workspace-table-${view.list_id}" class="listing grid">
        <thead>
            <tr>
                <th>${i18n("Subject")}</th>
                <th>${i18n("Type")}</th>
                <th>${i18n("Status")}</th>
                #[ <th>${i18n("Status date")}</th> ]#
                <th>${i18n("Owner")}</th>
                <th>${i18n("To")}</th>
                <th>${i18n("Sittings start")}</th>
                <th>${i18n("Sittings status")}</th>
            </tr>
        </thead>
        <tbody>
            $for{result in view.getData()}
            <tr $if{result.get("css_class")}class="${result['css_class']}"$fi>
                <td><a href="${result['url']}">${result["subject"]}</a></td>
                <td>${i18n(result["type"])}</td>
                <td>${i18n(result["status"])}</td>
                #[ <td>${result["status_date"]}</td> ]#
                <td>${result["owner"]}</td>
                <td>${result["to"]}</td>
                <td>${xml("<br/>".join(result["sittings_start"]))}</td>
                <td>${xml("<br/>".join(result["sittings_status"]))}</td>
            </tr>
            $rof
        </tbody>
    </table>
    $fi
</dd>
$end{scheduled}


#[ was: ui/forms/templates/timeline_viewlet.pt ]#
$begin{timeline}
<dt id="fieldsetlegend-${view.view_id}">
    <span>${i18n(view.view_title)}</span>
</dt>
<dd id="fieldset-${view.view_id}">
    <table class="listing">
        <thead>
            <tr>
                <th>${i18n("Type")}</th>
                <th>${i18n("Description")}</th>
                <th>${i18n("Date")}</th>
            </tr>
        </thead>
        <tbody>
            $for{data in view.results}
            <tr> 
                <td><span>${i18n(data["atype"])}</span></td>
                <td><span>${xml(data["description"])}</span></td>
                <td><span>${view.formatter.format(data['adate'])}</span></td>
            </tr>
            $rof
        </tbody>
    </table>
</dd>
$end{timeline}


#[ was: ui/forms/templates/offices_held_viewlet.pt ]#
$begin{offices_held}
<dt id="fieldsetlegend-${view.view_id}">
    <span>${i18n(view.view_title)}</span>
</dt>
<dd id="fieldset-${view.view_id}">
    <table class="listing">
        <thead>
            <tr>
                <th>${i18n("Office")}</th>
                <th>${i18n("Type")}</th>
                <th>${i18n("Title")}</th>
                <th>${i18n("From")}</th>
                <th>${i18n("To")}</th>
            </tr>
        </thead>
        <tbody>
            $for{oh in view.get_offices_held()}
            <tr> 
                <td><span>${oh["group"]}</span></td>
                <td><span>${oh["group_type"]}</span></td>
                <td><span>${oh["member_title"]}</span></td>
                <td><span>${oh["start_date"]}</span></td>
                <td><span>${oh["end_date"]}</span></td>
            </tr>
            $rof
        </tbody>
    </table>
</dd>
$end{offices_held}

#[ was: a generic ui.forms.viewlets.SubformViewlet (auto db model reflection) ]#
$begin{group_members}
<dt id="fieldsetlegend-${view.view_id}">
    <span>${i18n(view.view_title)}</span>
</dt>
<dd id="fieldset-${view.view_id}">
    <table class="listing">
        <thead>
            <tr>
                <th>${i18n("Name")}</th>
                <th>${i18n("Start")}</th>
                <th>${i18n("End")}</th>
            </tr>
        </thead>
        <tbody>
            $for{item in view.items}
            <tr> 
                <td><a href="${item['url']}">${item["fullname"]}</a></td>
                <td><span>${item["start_date"]}</span></td>
                <td><span>${item["end_date"]}</span></td>
            </tr>
            $rof
        </tbody>
    </table>
</dd>
$end{group_members}

